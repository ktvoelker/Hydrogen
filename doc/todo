
TODO
====

Clean up the new lexer code

  In H.Lexer, the main token parser,
  of type LexerSpec a -> LexerMode -> Parser (Token a)

  In H.Lexer, the skip parser, of type LexerMode -> Parser ()

  The main token loop should get one token under the current mode, perform the lexer
  mode action that was returned, and then perform a skip in the new mode.

  Put one special skip at the beginning.

  Throw an error if eof is reached in the wrong mode.

Get rid of all uses of Monad in Lexer and Parser

Convert to AParsec

Eliminate String more completely

  Hide Prelude and Data.List functions dealing only with String

    Provide replacements as needed

  Hide the old Show and Read classes in place of Text-based ones

    Use Builder in Show

    Provide a less crazy type in Read

